## What is JWT
JWT stands for Json Web Tokens. It is an authorization mechanism used as an alternative to session tokens.

## What are session tokens?
1. When a user tries to log in, the username & password is verified against the values stored in the database. If they match, the user is logged in & a session token is sent as a response to the user. This session token is sent by the client on every successive request made.
2. The server then verifies this session token's presence. If the session token has not expired, the request is served.
3. The session token is deleted from the database / data store when either it expires or the user logs out. There may be other reasons to do so, but the two mentioned are the primary ones.

### Problem with session tokens:
1. The problem with session tokens is that every time a request is made, the server needs to verify this session token by making a call to the database. At high scale when 1000s of calls are being made every sec, this increases database load & may overwhelm the database, increasing costs & might affect latency and throughput for other business use-case calls made to the database.

### How JWT solves this problem:
1. JWT fixes this problem by not requiring a database call.
2. When a user tries to log in, the username & password is verified against the values stored in the database. If they match, a JWT is created for the user.
A JWT consists of 3 parts:

a) Header: comprises the encoding scheme (SHA-256) name & the authorization mechanism type (JWT)
`{"alg": "HS256", "typ": "JWT"}` 
`typ` indicates this token is a JWT.
`alg` specifies the signing algorithm (HMAC-SHA256 / RSA-SHA256).

#### Purpose: Tells the verifier which algorithm to use to verify the signature. 

b) Payload: specifically the non-sensitive user information, like `userId`, `username`, `JWT issuedAtTime` (`iat`), `JWT expiryTime`.

#### Why not to put sensitive information in Payload?
Because payload is simply Base64 encoded. It is readable by anyone. Anyone can decode it.

c) Signature: Generated by signing the Base64Encoded(Header) + "." + Base64Encoded(Payload) using a secret key which only the server knows.

#### Purpose: Proves the token has not been tampered with and was issued by someone who knows the secret/private key.

When the user log in is successful, the server sends back the JWT to the client. On every subsequent request, the JWT is added to the headers in the request. The server creates a signature using Part1 & Part 2 of the received JWT, and compares it against the Part 3 of the JWT. If they match, it means the JWT is valid. Else, the JWT is invalid.